<canvas id="c" width="300" height="150" style="display: none"></canvas>
<button id="btn">Start PiP Sekundteller</button>

<script>
  const canvas = document.getElementById("c");
  const ctx = canvas.getContext("2d");

  let seconds = 0;

  // funksjon for å tegne sekunder
  function drawCounter() {
    ctx.fillStyle = "white";
    ctx.fillRect(0, 0, canvas.width, canvas.height); // blank bakgrunn
    ctx.fillStyle = "black";
    ctx.font = "40px Arial";
    ctx.fillText(seconds + " sek", 80, 90);
  }

  // gjør canvas til videostrøm
  const stream = canvas.captureStream();
  const video = document.createElement("video");
  video.srcObject = stream;

  document.getElementById("btn").addEventListener("click", async () => {
    try {
      await video.play();
      await video.requestPictureInPicture();

      // start teller
      setInterval(() => {
        seconds++;
        drawCounter();
      }, 1000);
    } catch (err) {
      console.error(err);
    }
  });

  // tegn startverdi (0 sek)
  drawCounter();
</script>
